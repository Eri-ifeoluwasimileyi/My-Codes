 {% extends "base.html" %}

{% block head %}
    <title>Task Smash</title>
{% endblock %}

{% block body %}
 <div class="content">
        <h1>Task Smash</h1>

        {% if tasks | length < 1 %}
        <h3>You have no tasks, add one!</h3>
        {% else %}
        <table>
            <tr>
                <th>Task</th>
                <th>Status</th>
                <th>Time added</th>
                <th>Actions</th>
            </tr>
            {% for task in tasks %}
              <tr>
                <td> 
                  {% if task.completed %} 
                    <s>{{ task.content }}</s>
                  {% else %}
                  {{ task.content }}
                  {% endif %}
                </td>
                
                <td>
                    <form action="/toggle/{{ task.id }}" method="POST" style="display:inline;">
                      <input 
                        type="checkbox" 
                        name="completed" 
                        onchange="this.form.submit()" 
                        {% if task.completed %} checked {% endif %}/>
                      </form>
                  </td>
                  
                  <td>{{ task.created_At.strftime('%Y/%m/%d') }}</td>
                  <td>
                    <a href="/delete/{{ task.id }}">Delete</a>
                    <br/>
                    <a href="/edit/{{ task.id }}">Edit</a>
                  </td>
              </tr>
            {% endfor %}
        </table>
        {% endif %}
        <form action="/" method="POST">
            <input type="text" name="content" id="content"/>
            <input type="submit" value="Add Task" id="add-btn"/>
        </form>
    </div>
{% endblock %} 